#!/bin/bash

# random-programs weather - a simple bash script for getting the weather
# Written in 2021 by xf8b unknownperson102424@pm.me
# To the extent possible under law, the author has dedicated all copyright 
# and related and neighboring rights to this software to the public domain worldwide.
# This software is distributed without any warranty.
# You should have also recieved a copy of the CC0 Public Domain Dedication along with this software.
# If not, see <https://creativecommons.org/publicdomain/zero/1.0/>.

# util functions

function empty() {
  if [ -n "$1" ] && [ "$1" != " " ]; then
    echo false
  else
    echo true
  fi
}   

# the actual 

if [ "$1" = "help" ]; then
  curl "wttr.in/:help"
  exit 0
fi

read -rp "Which version of wttr.in should be used? (press enter for v1) " version
read -rp "Which place's weather should be shown? (press enter for current location) " place
read -rp "What arguments should be added? (press enter for none) " arguments

url="v$version.wttr.in"

if [ "$(empty "$place")" ]; then
  url+="/$place"
fi

if [ "$(empty "$arguments")" ]; then
  url+="?$arguments"
fi

echo

curl "$url"
